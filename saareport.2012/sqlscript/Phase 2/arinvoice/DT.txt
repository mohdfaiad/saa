/******************************************************************************/
/****              Generated by IBExpert 17/12/2007 14:53:22               ****/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES NONE;



/******************************************************************************/
/****                                Tables                                ****/
/******************************************************************************/

CREATE TABLE AR_INVOICE_DT (
    DEBTOR_ACCT    VARCHAR10 NOT NULL,
    DOC_NO         VARCHAR15 NOT NULL,
    DOC_DATE       DDATE NOT NULL,
    TRX_TYPE       VARCHAR2 NOT NULL,
    DESCS          VARCHAR60,
    TAX_AMT        NUMERIC122,
    DOC_AMT        NUMERIC122 NOT NULL,
    BASE_AMT       NUMERIC122 NOT NULL,
    ITEM_CODE      VARCHAR(15) NOT NULL,
    ITEM_DESCS     VARCHAR(60),
    QTY            NUMERIC122,
    UNIT_COST      NUMERIC122,
    UNIT_DESCS     VARCHAR(45),
    ORDER_NO       VARCHAR(15) NOT NULL,
    ORDER_DATE     TIMESTAMP NOT NULL,
    TAX_RATE       NUMERIC122,
    PURCHASE_NO    VARCHAR(15) NOT NULL,
    PURCHASE_DATE  TIMESTAMP NOT NULL,
    DELIVERY_NO    VARCHAR(30),
    DELIVERY_DATE  TIMESTAMP,
    TH_BAHT        VARCHAR(500),
    UPDATE_USER    VARCHAR(30),
    UPDATE_DATE    TIMESTAMP
);





/******************************************************************************/
/****                             Primary Keys                             ****/
/******************************************************************************/

ALTER TABLE AR_INVOICE_DT ADD PRIMARY KEY (DEBTOR_ACCT, DOC_NO, DOC_DATE, TRX_TYPE, ITEM_CODE, ORDER_NO);


/******************************************************************************/
/****                               Triggers                               ****/
/******************************************************************************/


SET TERM ^ ;




/* Trigger: REPL$2_10_D_1_1 */
CREATE TRIGGER REPL$2_10_D_1_1 FOR AR_INVOICE_DT
INACTIVE AFTER DELETE POSITION 32760
AS
BEGIN
IF (USER <> 'REPL') THEN BEGIN
  INSERT INTO REPL_LOG(REPLNO,PUBDBNO,SUBDBNO,RELATIONNO,REPTYPE,OLDKEY)
  VALUES (1,1,2,10,'D',OLD.DEBTOR_ACCT||''||OLD.DOC_NO||''||OLD.DOC_DATE||''||OLD.TRX_TYPE||''||OLD.ITEM_CODE||''||OLD.ORDER_NO);END
END
^

/* Trigger: REPL$2_10_I_1_1 */
CREATE TRIGGER REPL$2_10_I_1_1 FOR AR_INVOICE_DT
INACTIVE AFTER INSERT POSITION 32760
AS
BEGIN
IF (USER <> 'REPL') THEN BEGIN
  INSERT INTO REPL_LOG(REPLNO,PUBDBNO,SUBDBNO,RELATIONNO,REPTYPE,NEWKEY)
  VALUES (1,1,2,10,'I',NEW.DEBTOR_ACCT||''||NEW.DOC_NO||''||NEW.DOC_DATE||''||NEW.TRX_TYPE||''||NEW.ITEM_CODE||''||NEW.ORDER_NO);END
END
^

/* Trigger: REPL$2_10_U_1_1 */
CREATE TRIGGER REPL$2_10_U_1_1 FOR AR_INVOICE_DT
INACTIVE AFTER UPDATE POSITION 32760
AS
BEGIN
IF (USER <> 'REPL') THEN BEGIN
  INSERT INTO REPL_LOG(REPLNO,PUBDBNO,SUBDBNO,RELATIONNO,REPTYPE,OLDKEY,NEWKEY)
  VALUES (1,1,2,10,'U',OLD.DEBTOR_ACCT||''||OLD.DOC_NO||''||OLD.DOC_DATE||''||OLD.TRX_TYPE||''||OLD.ITEM_CODE||''||OLD.ORDER_NO,NEW.DEBTOR_ACCT||''||NEW.DOC_NO||''||NEW.DOC_DATE||''||NEW.TRX_TYPE||''||NEW.ITEM_CODE||''||NEW.ORDER_NO);END
END
^


SET TERM ; ^



/******************************************************************************/
/****                              Privileges                              ****/
/******************************************************************************/


/* Privileges of users */
GRANT ALL ON AR_INVOICE_DT TO REPL WITH GRANT OPTION;

/* Privileges of triggers */
GRANT SELECT ON AR_INVOICE_DT TO TRIGGER IC_MAT_STK_DT_LINK_AD0;